<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SayDeck - –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 20px;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .endpoint {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        .method {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
            margin-right: 10px;
        }
        .post { background: #28a745; }
        .get { background: #17a2b8; }
        code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        button {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #218838;
        }
        textarea, input {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: none;
            margin: 5px 0;
            font-family: inherit;
        }
        .response {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .status-ok { color: #28a745; }
        .status-error { color: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé§ SayDeck API –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h1>
        
        <h2>üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ API Endpoints</h2>
        
        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/api/v1/auth/register</code>
            <p>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
        </div>
        
        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/api/v1/auth/login</code>
            <p>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
        </div>
        
        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/api/v1/generate/audio</code>
            <p>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ –∞—É–¥–∏–æ (Rate limit: 5/–º–∏–Ω)</p>
        </div>
        
        <div class="endpoint">
            <span class="method post">POST</span>
            <code>/api/v1/generate/text</code>
            <p>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ (Rate limit: 10/–º–∏–Ω)</p>
        </div>
        
        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/api/v1/presentations</code>
            <p>–°–ø–∏—Å–æ–∫ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
        </div>
        
        <div class="endpoint">
            <span class="method get">GET</span>
            <code>/api/v1/presentations/{id}</code>
            <p>–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ ID</p>
        </div>
    </div>
    
    <div class="container">
        <h2>üîê –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
        <p><strong>Email:</strong> test@example.com</p>
        <p><strong>Password:</strong> testpassword123</p>
        
        <div class="test-section">
            <h3>1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h3>
            <button onclick="testLogin()">–í–æ–π—Ç–∏ –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</button>
            <div id="loginResponse" class="response"></div>
        </div>
        
        <div class="test-section">
            <h3>2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞</h3>
            <textarea id="textInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏..." rows="4">
–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç - —ç—Ç–æ —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –º–µ–Ω—è–µ—Ç –Ω–∞—à –º–∏—Ä. 
–û–Ω –ø–æ–º–æ–≥–∞–µ—Ç –≤ –º–µ–¥–∏—Ü–∏–Ω–µ, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ –∏ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö —Å—Ñ–µ—Ä–∞—Ö. 
–ò–ò –º–æ–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –æ–±—Ä–∞–∑—ã –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è.
            </textarea>
            <button onclick="generateFromText()">–°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é</button>
            <div id="generateResponse" class="response"></div>
        </div>
        
        <div class="test-section">
            <h3>3. –°–ø–∏—Å–æ–∫ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π</h3>
            <button onclick="getPresentations()">–ü–æ–ª—É—á–∏—Ç—å –º–æ–∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏</button>
            <div id="presentationsResponse" class="response"></div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000/api/v1';
        let authToken = null;
        
        async function testLogin() {
            const response = document.getElementById('loginResponse');
            response.textContent = '–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è...';
            
            try {
                const res = await fetch(`${API_BASE}/auth/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: 'username=test@example.com&password=testpassword123'
                });
                
                const data = await res.json();
                
                if (res.ok) {
                    authToken = data.access_token;
                    response.className = 'response status-ok';
                    response.textContent = `‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!\nToken: ${authToken.substring(0, 50)}...`;
                } else {
                    response.className = 'response status-error';
                    response.textContent = `‚ùå –û—à–∏–±–∫–∞: ${JSON.stringify(data, null, 2)}`;
                }
            } catch (error) {
                response.className = 'response status-error';
                response.textContent = `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`;
            }
        }
        
        async function generateFromText() {
            const response = document.getElementById('generateResponse');
            const text = document.getElementById('textInput').value;
            
            if (!authToken) {
                response.className = 'response status-error';
                response.textContent = '‚ùå –°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å';
                return;
            }
            
            response.textContent = '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏...';
            
            try {
                const res = await fetch(`${API_BASE}/generate/text`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({
                        text: text,
                        language: 'ru',
                        slides_count: 5
                    })
                });
                
                const data = await res.json();
                
                if (res.ok) {
                    response.className = 'response status-ok';
                    response.textContent = `‚úÖ –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞!\n${JSON.stringify(data, null, 2)}`;
                } else {
                    response.className = 'response status-error';
                    response.textContent = `‚ùå –û—à–∏–±–∫–∞: ${JSON.stringify(data, null, 2)}`;
                }
            } catch (error) {
                response.className = 'response status-error';
                response.textContent = `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`;
            }
        }
        
        async function getPresentations() {
            const response = document.getElementById('presentationsResponse');
            
            if (!authToken) {
                response.className = 'response status-error';
                response.textContent = '‚ùå –°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å';
                return;
            }
            
            response.textContent = '–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π...';
            
            try {
                const res = await fetch(`${API_BASE}/presentations/`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await res.json();
                
                if (res.ok) {
                    response.className = 'response status-ok';
                    response.textContent = `‚úÖ –ù–∞–π–¥–µ–Ω–æ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π: ${data.length}\n${JSON.stringify(data, null, 2)}`;
                } else {
                    response.className = 'response status-error';
                    response.textContent = `‚ùå –û—à–∏–±–∫–∞: ${JSON.stringify(data, null, 2)}`;
                }
            } catch (error) {
                response.className = 'response status-error';
                response.textContent = `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`;
            }
        }
    </script>
</body>
</html>
